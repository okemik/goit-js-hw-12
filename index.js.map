{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import './css/style.css';\r\nimport axios from 'axios';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst form = document.querySelector('.search-form');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loadMoreBtn = document.getElementById('load-more-btn');\r\nconst loader = document.querySelector('.loader');\r\n\r\nlet searchQuery = '';\r\nlet page = 1;\r\nconst perPage = 20;\r\nlet totalHits = 0;\r\n\r\nconst lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\nform.addEventListener('submit', async e => {\r\n  e.preventDefault();\r\n  searchQuery = form.elements.searchQuery.value.trim();\r\n  page = 1;\r\n  gallery.innerHTML = '';\r\n  loadMoreBtn.classList.add('hidden');\r\n\r\n  if (!searchQuery) {\r\n    return iziToast.warning({ message: 'Please enter a search term.', position: 'topRight' });\r\n  }\r\n\r\n  await fetchImages();\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async () => {\r\n  page++;\r\n  await fetchImages();\r\n});\r\n\r\nasync function fetchImages() {\r\n  try {\r\n    showLoader(true);\r\n    const response = await axios.get('https://pixabay.com/api/', {\r\n      params: {\r\n        key: '50752157-0e570532136d69fa984569dbb',\r\n        q: searchQuery,\r\n        image_type: 'photo',\r\n        orientation: 'horizontal',\r\n        safesearch: true,\r\n        page,\r\n        per_page: perPage,\r\n      },\r\n    });\r\n\r\n    const { hits, totalHits: total } = response.data;\r\n    totalHits = total;\r\n\r\n    if (hits.length === 0 && page === 1) {\r\n      iziToast.error({ message: 'No images found. Try another search.', position: 'topRight' });\r\n      return;\r\n    }\r\n\r\n    renderGallery(hits);\r\n    lightbox.refresh();\r\n\r\n    const totalPages = Math.ceil(totalHits / perPage);\r\n    if (page >= totalPages) {\r\n      loadMoreBtn.classList.add('hidden');\r\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight' });\r\n    } else {\r\n      loadMoreBtn.classList.remove('hidden');\r\n    }\r\n\r\n    if (page > 1) scrollByCards();\r\n\r\n  } catch (error) {\r\n    iziToast.error({ message: 'Failed to fetch images.', position: 'topRight' });\r\n  } finally {\r\n    showLoader(false);\r\n  }\r\n}\r\n\r\nfunction renderGallery(images) {\r\n  const markup = images\r\n    .map(\r\n      image => `\r\n      <div class=\"photo-card\">\r\n        <a href=\"${image.largeImageURL}\">\r\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\r\n        </a>\r\n        <div class=\"info\">\r\n          <p><b>Likes:</b> ${image.likes}</p>\r\n          <p><b>Views:</b> ${image.views}</p>\r\n          <p><b>Comments:</b> ${image.comments}</p>\r\n          <p><b>Downloads:</b> ${image.downloads}</p>\r\n        </div>\r\n      </div>\r\n    `\r\n    )\r\n    .join('');\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction showLoader(isLoading) {\r\n  loader.classList.toggle('hidden', !isLoading);\r\n}\r\n\r\nfunction scrollByCards() {\r\n  const card = document.querySelector('.gallery .photo-card');\r\n  if (card) {\r\n    const cardHeight = card.getBoundingClientRect().height;\r\n    window.scrollBy({\r\n      top: cardHeight * 2,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n}\r\n"],"names":["form","gallery","loadMoreBtn","loader","searchQuery","page","perPage","totalHits","lightbox","SimpleLightbox","e","iziToast","fetchImages","showLoader","response","axios","hits","total","renderGallery","totalPages","scrollByCards","images","markup","image","isLoading","card","cardHeight"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,eAAe,eAAe,EACrDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAc,GACdC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EAAY,EAEhB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDT,EAAK,iBAAiB,SAAU,MAAMU,GAAK,CAOzC,GANAA,EAAE,eAAc,EAChBN,EAAcJ,EAAK,SAAS,YAAY,MAAM,KAAI,EAClDK,EAAO,EACPJ,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,QAAQ,EAE9B,CAACE,EACH,OAAOO,EAAS,QAAQ,CAAE,QAAS,8BAA+B,SAAU,UAAU,CAAE,EAG1F,MAAMC,EAAW,CACnB,CAAC,EAEDV,EAAY,iBAAiB,QAAS,SAAY,CAChDG,IACA,MAAMO,EAAW,CACnB,CAAC,EAED,eAAeA,GAAc,CAC3B,GAAI,CACFC,EAAW,EAAI,EACf,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGX,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,EAEK,CAAE,KAAAU,EAAM,UAAWC,CAAK,EAAKH,EAAS,KAG5C,GAFAP,EAAYU,EAERD,EAAK,SAAW,GAAKX,IAAS,EAAG,CACnCM,EAAS,MAAM,CAAE,QAAS,uCAAwC,SAAU,UAAU,CAAE,EACxF,MACD,CAEDO,EAAcF,CAAI,EAClBR,EAAS,QAAO,EAEhB,MAAMW,EAAa,KAAK,KAAKZ,EAAYD,CAAO,EAC5CD,GAAQc,GACVjB,EAAY,UAAU,IAAI,QAAQ,EAClCS,EAAS,KAAK,CAAE,QAAS,6DAA8D,SAAU,UAAU,CAAE,GAE7GT,EAAY,UAAU,OAAO,QAAQ,EAGnCG,EAAO,GAAGe,GAEf,MAAe,CACdT,EAAS,MAAM,CAAE,QAAS,0BAA2B,SAAU,UAAU,CAAE,CAC/E,QAAY,CACRE,EAAW,EAAK,CACjB,CACH,CAEA,SAASK,EAAcG,EAAQ,CAC7B,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6BAG/BA,EAAM,KAAK;AAAA,6BACXA,EAAM,KAAK;AAAA,gCACRA,EAAM,QAAQ;AAAA,iCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI3C,EACA,KAAK,EAAE,EACVtB,EAAQ,mBAAmB,YAAaqB,CAAM,CAChD,CAEA,SAAST,EAAWW,EAAW,CAC7BrB,EAAO,UAAU,OAAO,SAAU,CAACqB,CAAS,CAC9C,CAEA,SAASJ,GAAgB,CACvB,MAAMK,EAAO,SAAS,cAAc,sBAAsB,EAC1D,GAAIA,EAAM,CACR,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}