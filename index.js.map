{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import './css/style.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('load-more-btn');\nconst loader = document.querySelector('.loader');\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 20;\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  searchQuery = form.elements.searchQuery.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('hidden');\n\n  if (!searchQuery) {\n    return iziToast.warning({ message: 'Please enter a search term.', position: 'topRight' });\n  }\n\n  await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page++;\n  await fetchImages();\n});\n\nasync function fetchImages() {\n  try {\n    showLoader(true);\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '50752157-0e570532136d69fa984569dbb',\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    const { hits, totalHits: total } = response.data;\n    totalHits = total;\n\n    if (hits.length === 0 && page === 1) {\n      iziToast.error({ message: 'No images found. Try another search.', position: 'topRight' });\n      return;\n    }\n\n    renderGallery(hits);\n    lightbox.refresh();\n\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (page >= totalPages) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\", position: 'topRight' });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n\n    if (page > 1) scrollByCards();\n\n  } catch (error) {\n    iziToast.error({ message: 'Failed to fetch images.', position: 'topRight' });\n  } finally {\n    showLoader(false);\n  }\n}\n\nfunction renderGallery(images) {\n  const markup = images\n    .map(\n      image => `\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoader(isLoading) {\n  loader.classList.toggle('hidden', !isLoading);\n}\n\nfunction scrollByCards() {\n  const card = document.querySelector('.gallery .photo-card');\n  if (card) {\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["form","gallery","loadMoreBtn","loader","searchQuery","page","perPage","totalHits","lightbox","SimpleLightbox","e","iziToast","fetchImages","showLoader","response","axios","hits","total","renderGallery","totalPages","scrollByCards","images","markup","image","isLoading","card","cardHeight"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,eAAe,eAAe,EACrDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAc,GACdC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EAAY,EAEhB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDT,EAAK,iBAAiB,SAAU,MAAMU,GAAK,CAOzC,GANAA,EAAE,eAAgB,EAClBN,EAAcJ,EAAK,SAAS,YAAY,MAAM,KAAM,EACpDK,EAAO,EACPJ,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,QAAQ,EAE9B,CAACE,EACH,OAAOO,EAAS,QAAQ,CAAE,QAAS,8BAA+B,SAAU,WAAY,EAG1F,MAAMC,EAAa,CACrB,CAAC,EAEDV,EAAY,iBAAiB,QAAS,SAAY,CAChDG,IACA,MAAMO,EAAa,CACrB,CAAC,EAED,eAAeA,GAAc,CAC3B,GAAI,CACFC,EAAW,EAAI,EACf,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGX,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,EAEK,CAAE,KAAAU,EAAM,UAAWC,CAAO,EAAGH,EAAS,KAG5C,GAFAP,EAAYU,EAERD,EAAK,SAAW,GAAKX,IAAS,EAAG,CACnCM,EAAS,MAAM,CAAE,QAAS,uCAAwC,SAAU,WAAY,EACxF,MACN,CAEIO,EAAcF,CAAI,EAClBR,EAAS,QAAS,EAElB,MAAMW,EAAa,KAAK,KAAKZ,EAAYD,CAAO,EAC5CD,GAAQc,GACVjB,EAAY,UAAU,IAAI,QAAQ,EAClCS,EAAS,KAAK,CAAE,QAAS,6DAA8D,SAAU,WAAY,GAE7GT,EAAY,UAAU,OAAO,QAAQ,EAGnCG,EAAO,GAAGe,EAAe,CAE9B,MAAe,CACdT,EAAS,MAAM,CAAE,QAAS,0BAA2B,SAAU,WAAY,CAC/E,QAAY,CACRE,EAAW,EAAK,CACpB,CACA,CAEA,SAASK,EAAcG,EAAQ,CAC7B,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6BAG/BA,EAAM,KAAK;AAAA,6BACXA,EAAM,KAAK;AAAA,gCACRA,EAAM,QAAQ;AAAA,iCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIhD,EACK,KAAK,EAAE,EACVtB,EAAQ,mBAAmB,YAAaqB,CAAM,CAChD,CAEA,SAAST,EAAWW,EAAW,CAC7BrB,EAAO,UAAU,OAAO,SAAU,CAACqB,CAAS,CAC9C,CAEA,SAASJ,GAAgB,CACvB,MAAMK,EAAO,SAAS,cAAc,sBAAsB,EAC1D,GAAIA,EAAM,CACR,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACL,CACA"}